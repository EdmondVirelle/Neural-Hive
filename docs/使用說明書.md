# Neural Hive 使用說明書

> **AI Agent 叢集指揮中心** — v2.0.0

---

## 目錄

1. [簡介](#簡介)
2. [安裝與啟動](#安裝與啟動)
3. [首次使用引導](#首次使用引導)
4. [核心功能](#核心功能)
5. [進階操作](#進階操作)
6. [設定](#設定)
7. [鍵盤快捷鍵](#鍵盤快捷鍵)
8. [配置指南](#配置指南)
9. [故障排除](#故障排除)

---

## 簡介

### 什麼是 Neural Hive？

**Neural Hive** 是一款專為開發者設計的桌面應用程式，旨在解決同時管理多個 AI CLI 工具時的混亂與不便。

它就像是一個「指揮中心」，將所有 AI 助手的終端機視窗整合在一個統一的介面中。您可以同時讓一個 Agent 寫前端、另一個修復 Bug、第三個撰寫文件，並透過視覺化的儀表板即時監控它們的思考與工作狀態。

### v2.0 新功能

- **7 種 CLI 支援**：Claude Code、Gemini CLI、Aider、Codex CLI、OpenCode、Cursor、GitHub Copilot
- **自動偵測**：啟動時自動掃描已安裝的 CLI 工具
- **雙語介面**：英文/繁體中文即時切換
- **深色/淺色主題**：依偏好切換
- **鍵盤快捷鍵**：Ctrl+N 新增、Ctrl+B 廣播、Ctrl+F 搜尋等
- **日誌搜尋**：在專注模式中使用 Ctrl+F 搜尋日誌
- **設定頁面**：完整的 GUI 設定（CLI 路徑、效能、語言、主題）
- **Onboarding 引導**：首次使用的引導精靈
- **錯誤邊界**：應用程式更穩定，局部錯誤不會導致全部崩潰

### 為什麼需要它？

| 痛點 | Neural Hive 的解決方案 |
|------|----------------------|
| 迷失在數十個終端機視窗中 | 統一的網格儀表板 |
| 不知道 Agent 在做什麼 | 即時狀態顯示（THINKING / WORKING / ERROR） |
| 每個 Agent 都要輸入相同指令 | 一鍵廣播到所有 Agent |
| 不確定裝了哪些 CLI | 自動偵測已安裝的工具 |
| 需要切換語言 | 英文/繁體中文即時切換 |

---

## 安裝與啟動

### 系統需求

| 項目 | 最低需求 |
|------|---------|
| **Node.js** | v18.0.0 或更高 |
| **作業系統** | Windows、macOS 或 Linux |
| **記憶體** | 4 GB（建議 8 GB 以上） |

### 安裝步驟

1. **取得專案程式碼**
   ```bash
   git clone https://github.com/EdmondVirelle/Neural-Hive.git
   cd Neural-Hive
   ```

2. **安裝相依套件**
   ```bash
   npm install
   ```

3. **啟動應用程式**

   **開發模式**（推薦，支援熱重載）：
   ```bash
   npm run dev          # 啟動前端開發伺服器
   npm run dev:electron # 啟動 Electron 主程式（另一個終端機）
   ```

   **生產模式**（建置後執行）：
   ```bash
   npm run build
   npm run build:electron
   ```

4. **執行測試**
   ```bash
   npm test             # 執行全部 196 個單元測試
   ```

---

## 首次使用引導

首次啟動 Neural Hive 時，您會看到 **Onboarding 引導精靈**：

### 步驟 1：歡迎頁面
簡介 Neural Hive 的核心功能與操作方式。

### 步驟 2：CLI 偵測
系統自動掃描您的電腦，偵測已安裝的 AI CLI 工具：
- 顯示每個工具的安裝狀態與版本號
- 若工具未安裝，會提供安裝指引
- 可手動設定自訂路徑

### 步驟 3：快速開始
選擇一個已安裝的 CLI 工具，選擇工作目錄，立即啟動您的第一個 Agent。

### 步驟 4：完成
引導完成！系統會記住您已完成 Onboarding，下次啟動將直接進入儀表板。

---

## 核心功能

### 1. 主儀表板 (Dashboard)

啟動後進入主儀表板，以卡片形式展示所有活躍的 Agent。

**介面結構**：
- **側邊欄**（左側）：導覽、Agent 統計、語言/主題切換
- **頂部操作列**：搜尋、新增 Agent、廣播、活躍 Agent 計數
- **主區域**：Agent 卡片網格

**空狀態**：當沒有任何 Agent 時，顯示引導頁面，邀請您部署第一個 Agent。

### 2. 新增 Agent (Spawn)

點擊頂部的 **[+ New Agent]** 按鈕（或按 `Ctrl+N`）：

1. **選擇類型**：從 7 種已支援的 CLI 中選擇，或選擇「Custom」自訂指令
   - 每個選項旁會顯示安裝狀態標籤（✅ installed / ⚠ not installed）
2. **命名（選填）**：為 Agent 取個名字，方便識別（例如 "前端重構"）
3. **自訂指令**：僅在選擇 Custom 類型時顯示
4. **選擇目錄**：指定 Agent 的工作目錄（支援系統檔案瀏覽器選擇）
5. 點擊 **Spawn** 啟動

### 3. Agent 卡片

每張卡片提供以下資訊：

| 區域 | 內容 |
|------|------|
| **標題** | Agent 名稱、類型標籤 |
| **狀態燈號** | THINKING (黃色)、WORKING (藍色呼吸燈)、IDLE (綠色)、ERROR (紅色)、PAUSED (紫色) |
| **終端預覽** | 最後幾行輸出 |
| **操作按鈕** | 暫停、恢復、終止 |
| **底部** | 工作目錄路徑 |

### 4. 專注模式 (Focus Mode)

**點擊任意卡片**即可進入全螢幕專注模式。

| 功能 | 說明 |
|------|------|
| **完整終端機** | 完整的 xterm.js 體驗，支援滾動、複製、貼上 |
| **互動操作** | 直接與 CLI 對話（確認 y/n、輸入指令等） |
| **日誌搜尋** | 按 `Ctrl+F` 開啟搜尋列，支援向上/向下搜尋 |
| **側邊資訊欄** | 顯示思考鏈與技能使用歷史 |
| **重新啟動** | 快速重啟當前 Agent |

按 `Escape` 返回儀表板。

---

## 進階操作

### 暫停與恢復

在卡片右上角的操作列：
- ⏸ **暫停 (Pause)**：暫時鎖定 Agent 輸入，防止誤觸
- ▶ **恢復 (Resume)**：恢復 Agent 互動
- ✕ **終止 (Kill)**：完全關閉該 Agent 實例

### 命令廣播 (Broadcasting)

想要一次對所有 Agent 發送指令：

1. 按 `Ctrl+B` 或點擊廣播按鈕開啟面板
2. 輸入指令（例如 `git status`）
3. 選擇目標：全部 Agent 或依標籤篩選
4. 點擊發送

**變數注入**：支援在指令模板中使用 `{filename}` 等變數。

### 日誌搜尋

在專注模式中：
1. 按 `Ctrl+F` 開啟搜尋列
2. 輸入關鍵字
3. 使用上/下箭頭導覽搜尋結果
4. 按 `Escape` 關閉搜尋

---

## 設定

點擊側邊欄的齒輪圖示（或按 `Ctrl+,`）進入設定頁面。

### 一般設定

| 設定項 | 說明 |
|--------|------|
| **語言** | 英文 / 繁體中文 |
| **主題** | 深色 / 淺色 / 跟隨系統 |

### CLI 路徑

覆蓋各 CLI 工具的預設路徑。適用於：
- CLI 安裝在非標準位置
- 想要使用特定版本的 CLI

### 效能調校

| 設定項 | 預設值 | 說明 |
|--------|--------|------|
| **節流間隔** | 100ms | 輸出批次處理的時間間隔 |
| **最大滾動緩衝** | 10,000 行 | xterm.js 保留的最大行數 |
| **最大 Agent 數** | 10 | 允許同時執行的 Agent 上限 |

### 關於

顯示 Neural Hive 版本、技術堆疊等資訊。

---

## 鍵盤快捷鍵

| 快捷鍵 | 功能 |
|--------|------|
| `Ctrl+N` | 新增 Agent |
| `Ctrl+B` | 開啟廣播面板 |
| `Ctrl+,` | 開啟設定 |
| `Ctrl+1` ~ `Ctrl+9` | 聚焦第 N 個 Agent |
| `Ctrl+F` | 日誌搜尋（專注模式中） |
| `Escape` | 返回儀表板 / 關閉對話框 |

---

## 配置指南

### 解析器設定

Neural Hive 使用 `config/parsers.json` 定義如何解析不同 AI 工具的輸出。

v2.0 內建支援 7 種 CLI 的解析規則：

```json
{
  "parsers": {
    "claude": {
      "name": "Claude Code",
      "command": "claude",
      "patterns": {
        "thinking": "Thinking|Analyzing",
        "tool_use": "Reading|Writing|Searching",
        "error": "Error|Exception"
      }
    },
    "gemini": { ... },
    "aider": { ... },
    "codex": { ... },
    "opencode": { ... },
    "cursor": { ... },
    "copilot": { ... }
  }
}
```

### 自訂解析規則

您可以編輯 `parsers.json` 來支援新的 CLI 工具或調整現有規則。修改後需重啟應用程式。

### 設定檔位置

| 檔案 | 位置 | 用途 |
|------|------|------|
| `parsers.json` | `config/parsers.json` | CLI 解析規則 |
| `settings.json` | `%APPDATA%/neural-hive/settings.json` (Windows) | 使用者偏好設定 |

---

## 故障排除

### Q: Agent 無法啟動？

1. 確認對應的 CLI 工具已安裝：
   - 在終端機中輸入 `claude --version`（或對應工具的指令）
   - 確認該指令在系統 `PATH` 中
2. 檢查設定中的自訂路徑是否正確
3. 確認選擇的工作目錄存在

### Q: Onboarding 時偵測不到已安裝的 CLI？

- 確認 CLI 已加入系統 PATH
- 嘗試在設定中手動指定路徑
- Windows 使用者：可能需要重新啟動才能讓 PATH 變更生效

### Q: 狀態一直顯示 IDLE？

- 檢查 `parsers.json` 中的正則表達式是否匹配該工具的輸出
- CLI 工具更新可能會改變輸出格式

### Q: 語言切換後部分文字未更新？

- 這是已知的邊界情況，重新載入頁面（`Ctrl+R`）即可解決

### Q: 中文字元顯示亂碼？

- Neural Hive 預設使用 UTF-8 編碼
- 確保您的 CLI 工具與系統環境變數設定為 UTF-8

### Q: 效能問題（卡頓）？

- 降低「最大 Agent 數」設定
- 增加「節流間隔」（例如 200ms）
- 降低「最大滾動緩衝」行數
- 關閉不再使用的 Agent

---

*Neural Hive v2.0 — 讓 AI 代理叢集化工作*
*Last Updated: 2026-02-09*
