# 🐝 Neural Hive 使用說明書

> **AI Agent 叢集指揮中心** — v1.0.0

---

## 📋 目錄

1. [簡介](#簡介)
2. [安裝與啟動](#安裝與啟動)
3. [核心功能](#核心功能)
4. [進階操作](#進階操作)
5. [配置指南](#配置指南)
6. [故障排除](#故障排除)

---

## 簡介

### 什麼是 Neural Hive？

**Neural Hive** 是一款專為開發者設計的桌面應用程式，旨在解決同時管理多個 AI CLI 工具（如 Claude Code、Gemini CLI、Aider）時的混亂與不便。

它就像是一個「指揮中心」，將所有 AI 助手的終端機視窗整合在一個統一的介面中。您可以同時讓一個 Agent 寫前端、另一個修復 Bug、第三個撰寫文件，並透過視覺化的儀表板即時監控它們的思考與工作狀態。

### 為什麼需要它？

- **集中管理**：不再迷失在數十個終端機視窗中。
- **視覺化狀態**：一眼看出誰在 `THINKING`（思考）、誰在 `WORKING`（執行工具）或 `ERROR`（報錯）。
- **批量控制**：一次對所有 Agent 下達 "git status" 或其他指令。
- **環境感知**：隨時清楚每個 Agent 正在哪個目錄下工作。

---

## 安裝與啟動

### 系統需求

- **Node.js**: v18.0.0 或更高版本
- **OS**: Windows, macOS, 或 Linux

### 安裝步驟

1. **取得專案程式碼**
   ```bash
   git clone https://github.com/your-org/neural-hive.git
   cd neural-hive
   ```

2. **安裝相依套件**
   ```bash
   npm install
   ```

3. **啟動應用程式**

   **開發模式**（推薦，支援熱重載）：
   ```bash
   # 需開啟兩個終端機分別執行：
   npm run dev          # 啟動前端開發伺服器
   npm run dev:electron # 啟動 Electron 主程式
   ```

   **生產模式**（建置後執行）：
   ```bash
   npm run build
   npm run build:electron
   # 執行 dist/ win-unpacked 下的執行檔
   ```

---

## 核心功能

### 1. 主儀表板 (Dashboard)

啟動後，您將看到主儀表板。這裡以卡片形式展示所有活躍的 Agent。

- **狀態列**：頂部顯示當前 Neural Hive 版本 (v1.0.0) 與活躍 Agent 數量。
- **網格視圖**：自動排列所有 Agent 卡片。

### 2. 新增 Agent (Spawn)

點擊右上角的 **[+ New Agent]** 按鈕：

1. **選擇類型**：支援 `Claude`、`Gemini`、`Custom` 等。
2. **命名 (選填)**：為 Agent 取個名字（例如 "Frontend Refactor"），方便識別。
3. **選擇目錄**：指定 Agent 的工作目錄 (CWD)。
4. 點擊 **Spawn**。

### 3. Agent 卡片資訊

每個 Agent 卡片提供以下資訊：

- **標題**：Agent 名稱與類型。
- **狀態燈號**：
  - 🟡 **THINKING**：AI 正在思考或分析。
  - 🟢 **WORKING**：AI 正在執行工具（讀檔、寫入、搜尋）。
  - 🔵 **IDLE**：閒置中，等待指令。
  - 🔴 **ERROR**：發生錯誤或崩潰。
  - 🟣 **PAUSED**：已暫停輸入。
- **終端機預覽**：顯示最後幾行的輸出內容。
- **工作目錄 (Footer)**：底部顯示當前運行的資料夾路徑。

### 4. 專注模式 (Focus Mode)

**點擊任意卡片**即可進入全螢幕專注模式。

- **完整終端機**：提供完整的 xterm.js 體驗，支援滾動、複製、貼上。
- **互動操作**：直接與 CLI 進行對話（例如確認 `y/n`）。
- **側邊資訊欄**：(未來功能) 顯示思考鏈與工具使用歷史。

---

## 進階操作

### 暫停與恢復

在卡片右上角的操作列：
- ⏸️ **暫停 (Pause)**：暫時鎖定 Agent 輸入，防止誤觸。
- ▶️ **恢復 (Resume)**：恢復 Agent 互動。
- ❌ **終止 (Kill)**：完全關閉該 Agent 實例。

### 命令廣播 (Broadcasting)

想要一次更新所有 Agent 的 git 狀態？

1. 使用快捷鍵（未來支援）或介面按鈕開啟廣播面板。
2. 輸入指令（例如 `git status`）。
3. 選擇目標（全部或特定標籤）。
4. 發送。

---

## 配置指南

Neural Hive 使用 `config/parsers.json` 來定義如何解析不同 AI 工具的輸出。

### 自訂解析規則

您可以編輯 `config/parsers.json` 來支援新的 CLI 工具或調整現有規則：

```json
{
  "parsers": {
    "claude": {
      "name": "Claude Code",
      "command": "claude",
      "patterns": {
        "thinking": "Thinking|Analyzing",  // 觸發思考狀態的關鍵字
        "tool_use": "Reading|Writing",     // 觸發工作狀態的關鍵字
        "error": "Error|Exception"         // 觸發錯誤狀態的關鍵字
      }
    }
  }
}
```

修改後，應用程式通常需要重啟才能生效。

---

## 故障排除

### Q: Agent 無法啟動？
- 請確認您的系統 `PATH` 中已安裝並可執行對應的 CLI 工具（如 `claude` 或 `gemini`）。
- 檢查選擇的工作目錄是否存在。

### Q: 狀態一直顯示 IDLE？
- 檢查 `parsers.json` 中的正則表達式是否匹配該工具當前的輸出格式。CLI 工具更新有時會改變輸出文字。

### Q: 中文字元顯示亂碼？
- Neural Hive 預設使用 UTF-8 編碼。請確保您的 CLI 工具與系統終端機環境變數設定為 UTF-8。

---
*Empowering your AI workflow.*
