[English](./Specification.md)

# è»Ÿé«”è¦æ ¼èªªæ˜æ›¸ (Software Requirements Specification)

| é …ç›® | å…§å®¹ |
|------|------|
| **å°ˆæ¡ˆåç¨±** | AI Agent Orchestrator |
| **å°ˆæ¡ˆä»£è™Ÿ** | Neural Hive |
| **ç‰ˆæœ¬** | v2.0.0 |
| **æ—¥æœŸ** | 2026-02-09 |

---

## ç›®éŒ„

1. [å°ˆæ¡ˆæ¦‚è¿°](#1-å°ˆæ¡ˆæ¦‚è¿°-project-overview)
2. [ç³»çµ±æ¶æ§‹](#2-ç³»çµ±æ¶æ§‹-system-architecture)
3. [åŠŸèƒ½éœ€æ±‚](#3-åŠŸèƒ½éœ€æ±‚-functional-requirements)
4. [UI/UX è¨­è¨ˆè¦ç¯„](#4-uiux-è¨­è¨ˆè¦ç¯„-uiux-requirements)
5. [éåŠŸèƒ½éœ€æ±‚](#5-éåŠŸèƒ½éœ€æ±‚-non-functional-requirements)
6. [å¯¦ä½œéšæ®µè¦åŠƒ](#6-å¯¦ä½œéšæ®µè¦åŠƒ-implementation-roadmap)

---

## 1. å°ˆæ¡ˆæ¦‚è¿° (Project Overview)

### 1.1 ç›®æ¨™ (Goal)

é–‹ç™¼ä¸€æ¬¾**è·¨å¹³å°çš„æ¡Œé¢æ‡‰ç”¨ç¨‹å¼**ï¼Œæ—¨åœ¨è§£æ±ºå°ˆæ¥­é–‹ç™¼è€…éœ€è¦åŒæ™‚æ“ä½œå¤šå€‹ AI CLI å·¥å…·çš„ç—›é»ã€‚

æœ¬ç³»çµ±ä½œç‚ºä¸€å€‹ã€Œ**åœ–å½¢åŒ–æŒ‡æ®ä¸­å¿ƒ**ã€ï¼Œå…è¨±ä½¿ç”¨è€…ï¼š
- ä¸¦è¡Œç®¡ç†å¤šå€‹ AI ä»£ç†ï¼ˆAgentï¼‰çš„ç”Ÿå‘½é€±æœŸ
- è‡ªå‹•åµæ¸¬å·²å®‰è£çš„ CLI å·¥å…·
- ç›£æ§å…¶æ€è€ƒèˆ‡å·¥å…·ä½¿ç”¨ç‹€æ…‹
- æ”¯æ´æ‰¹é‡æŒ‡ä»¤ä¸‹é”
- æä¾›é›™èªä»‹é¢ï¼ˆè‹±æ–‡/ç¹é«”ä¸­æ–‡ï¼‰èˆ‡ä¸»é¡Œåˆ‡æ›

### 1.2 ç¯„åœ (Scope)

**æ”¯æ´å°è±¡**ï¼šå·²è¨‚é–± Claude Pro / Gemini Advanced / GitHub Copilot ç­‰æœå‹™çš„ä½¿ç”¨è€…ï¼Œåˆ©ç”¨å…¶æä¾›çš„ CLI å·¥å…·é€²è¡Œæ“ä½œï¼ˆé API ä¸²æ¥ï¼‰ã€‚

**æ”¯æ´ CLI å·¥å…·**ï¼ˆv2.0ï¼‰ï¼š

| CLI å·¥å…· | æŒ‡ä»¤ | èªªæ˜ |
|----------|------|------|
| Claude Code | `claude` | Anthropic çš„ AI ç·¨ç¢¼åŠ©æ‰‹ |
| Gemini CLI | `gemini` | Google çš„ AI CLI å·¥å…· |
| Aider | `aider` | é–‹æº AI é…å°ç¨‹å¼è¨­è¨ˆå·¥å…· |
| Codex CLI | `codex` | OpenAI çš„ CLI å·¥å…· |
| OpenCode | `opencode` | é–‹æº AI ç·¨ç¢¼åŠ©æ‰‹ |
| Cursor | `cursor` | AI ç¨‹å¼ç¢¼ç·¨è¼¯å™¨ CLI |
| GitHub Copilot | `gh copilot` | é€é GitHub CLI æ“´å±•ä½¿ç”¨ |

**æ ¸å¿ƒåƒ¹å€¼**ï¼š

| åƒ¹å€¼ | èªªæ˜ |
|------|------|
| **ä¸¦è¡Œè™•ç†** | åŒæ™‚åŸ·è¡Œå¤šå€‹ Agent ä»»å‹™ï¼ˆå¦‚ï¼šAgent A å¯«å‰ç«¯ï¼ŒAgent B å¯«å¾Œç«¯ï¼‰ |
| **è¦–è¦ºåŒ–ç›£æ§** | å°‡ CLI çš„ç´”æ–‡å­—è¼¸å‡ºè½‰åŒ–ç‚ºç‹€æ…‹å„€è¡¨æ¿ï¼ˆæ€è€ƒä¸­ã€åŸ·è¡Œå·¥å…·ã€éŒ¯èª¤ï¼‰ |
| **æˆæœ¬å„ªåŒ–** | åˆ©ç”¨æ—¢æœ‰è¨‚é–±é¡åº¦ï¼Œç„¡éœ€é¡å¤– API Token è²»ç”¨ |
| **è‡ªå‹•åµæ¸¬** | å•Ÿå‹•æ™‚è‡ªå‹•æƒæå·²å®‰è£çš„ CLI å·¥å…· |
| **å¤šèªç³»** | è‹±æ–‡/ç¹é«”ä¸­æ–‡é›™èªä»‹é¢ |

---

## 2. ç³»çµ±æ¶æ§‹ (System Architecture)

### 2.1 æŠ€è¡“å †ç–Š (Tech Stack)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Electron Application                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Main Process           â”‚       Renderer Process        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Node.js + TypeScript â”‚  â”‚  â”‚   Vue 3 + TypeScript    â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚  â€¢ node-pty (TTY)     â”‚  â”‚  â”‚  â€¢ Pinia (State Mgmt)   â”‚  â”‚
â”‚  â”‚  â€¢ Agent Manager      â”‚â—„â”€â”¼â”€â”€â”¤  â€¢ Vue Router           â”‚  â”‚
â”‚  â”‚  â€¢ CLI Detector       â”‚â”€â”€â”¼â”€â–ºâ”‚  â€¢ Vue I18n             â”‚  â”‚
â”‚  â”‚  â€¢ Settings Manager   â”‚  â”‚  â”‚  â€¢ Tailwind + Shadcn/ui â”‚  â”‚
â”‚  â”‚  â€¢ Broadcast Manager  â”‚  â”‚  â”‚  â€¢ xterm.js + Search    â”‚  â”‚
â”‚  â”‚  â€¢ Health Monitor     â”‚  â”‚  â”‚  â€¢ Web Worker (Parser)  â”‚  â”‚
â”‚  â”‚  â€¢ IPC Handler        â”‚  â”‚  â”‚  â€¢ Error Boundary       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚     External CLI Processes    â”‚
              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
              â”‚  â”‚ Claude â”‚  â”‚ Gemini â”‚      â”‚
              â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
              â”‚  â”‚ Aider  â”‚  â”‚ Codex  â”‚      â”‚
              â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
              â”‚  â”‚Copilot â”‚  â”‚OpenCodeâ”‚      â”‚
              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| å±¤ç´š | æŠ€è¡“ | ç”¨é€” |
|------|------|------|
| Application Shell | Electron | æä¾›è·¨å¹³å°æ¡Œé¢ç’°å¢ƒ |
| Backend (Main Process) | Node.js + TypeScript | æ ¸å¿ƒé‚è¼¯è™•ç† |
| Terminal Emulation | node-pty | æ ¸å¿ƒçµ„ä»¶ï¼Œç”¨æ–¼å½è£ TTY |
| CLI Detection | cli-detector.ts | è‡ªå‹•åµæ¸¬å·²å®‰è£çš„ AI CLI å·¥å…· |
| Settings Persistence | settings-manager.ts | ä½¿ç”¨è€…è¨­å®šæŒä¹…åŒ–ï¼ˆJSONï¼‰ |
| Health Monitoring | health-monitor.ts | åµæ¸¬ Agent å‡çµèˆ‡ç•°å¸¸ |
| IPC Communication | Electron IPC Main/Renderer | é€²ç¨‹é–“é€šè¨Š |
| Frontend (Renderer) | Vue 3 + TypeScript | ä½¿ç”¨è€…ä»‹é¢ |
| State Management | Pinia | ç®¡ç†æ‰€æœ‰ Agent èˆ‡è¨­å®šçš„å³æ™‚ç‹€æ…‹ |
| Routing | Vue Router (Memory History) | é é¢è·¯ç”±ï¼ˆDashboard / Settings / Onboardingï¼‰ |
| Internationalization | Vue I18n | è‹±æ–‡/ç¹é«”ä¸­æ–‡é›™èªæ”¯æ´ |
| UI Framework | Tailwind CSS + Shadcn/ui | ç¾ä»£åŒ– UI çµ„ä»¶åº« |
| Terminal Rendering | xterm.js + xterm-addon-search | çµ‚ç«¯æ©Ÿæ¸²æŸ“èˆ‡æ—¥èªŒæœå°‹ |
| Performance | Web Worker | å°‡æ­£å‰‡è§£æç§»è‡³èƒŒæ™¯ç·šç¨‹ |

### 2.2 è³‡æ–™æµå‘ (Data Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚    â”‚   Vue        â”‚    â”‚   Electron   â”‚    â”‚  CLI     â”‚
â”‚  Input   â”‚â”€â”€â”€â–ºâ”‚   Frontend   â”‚â”€â”€â”€â–ºâ”‚   Main       â”‚â”€â”€â”€â–ºâ”‚  Process â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   Process    â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                    â”‚              â”‚         â”‚
                      IPC           â”‚  node-pty    â”‚         â”‚
                       â”‚            â”‚              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â–¼            â”‚              â”‚    stdout
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   Regex      â”‚    (ANSI)
â”‚  Render  â”‚â—„â”€â”€â”€â”‚   State      â”‚â—„â”€â”€â”€â”‚   Parser     â”‚
â”‚  UI      â”‚    â”‚   Update     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æµç¨‹èªªæ˜**ï¼š

1. **Input**ï¼šä½¿ç”¨è€…åœ¨ Vue å‰ç«¯è¼¸å…¥æŒ‡ä»¤ / é»æ“ŠæŒ‰éˆ•
2. **Process**ï¼šElectron Main Process é€é node-pty å°‡æŒ‡ä»¤å¯«å…¥å°æ‡‰çš„å­ç¨‹åº (stdin)
3. **Execution**ï¼šå¤–éƒ¨ CLI åŸ·è¡Œä¸¦ç”¢ç”Ÿè¼¸å‡º
4. **Capture**ï¼šnode-pty æ””æˆª stdoutï¼ˆå« ANSI é¡è‰²ç¢¼ï¼‰
5. **Parsing**ï¼šæ­£å‰‡è¡¨é”å¼å¼•æ“åˆ†æè¼¸å‡ºæµï¼Œåˆ¤æ–·ç•¶å‰ç‹€æ…‹ (Thinking/Tool Use)
6. **Output**ï¼šè§£æå¾Œçš„ç‹€æ…‹èˆ‡åŸå§‹ Log é€é IPC å»£æ’­å› Vue å‰ç«¯é€²è¡Œæ¸²æŸ“

### 2.3 æ¨¡çµ„çµæ§‹ (Module Structure)

```
electron/
â”œâ”€â”€ main.ts                 # Electron ä¸»é€²ç¨‹å…¥å£
â”œâ”€â”€ preload.cts             # å®‰å…¨çš„ contextBridge API
â”œâ”€â”€ agent-manager.ts        # Agent ç”Ÿå‘½é€±æœŸç®¡ç†
â”œâ”€â”€ cli-detector.ts         # CLI è‡ªå‹•åµæ¸¬å¼•æ“
â”œâ”€â”€ settings-manager.ts     # è¨­å®šæŒä¹…åŒ–
â”œâ”€â”€ config-loader.ts        # è§£æå™¨è¨­å®šè¼‰å…¥
â”œâ”€â”€ broadcast-manager.ts    # æŒ‡ä»¤å»£æ’­ç®¡ç†
â”œâ”€â”€ output-throttler.ts     # è¼¸å‡ºç¯€æµå™¨
â”œâ”€â”€ health-monitor.ts       # Agent å¥åº·ç›£æ§
â”œâ”€â”€ resource-monitor.ts     # ç³»çµ±è³‡æºç›£æ§
â””â”€â”€ taskbar-notifier.ts     # å·¥ä½œåˆ—é€šçŸ¥
src/
â”œâ”€â”€ main.ts                 # Vue æ‡‰ç”¨å…¥å£
â”œâ”€â”€ App.vue                 # Shell Layout (Sidebar + TopBar + Router)
â”œâ”€â”€ router/index.ts         # Vue Router è¨­å®š
â”œâ”€â”€ i18n/                   # åœ‹éš›åŒ–
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ en.ts               # è‹±æ–‡èªç³»
â”‚   â””â”€â”€ zh-TW.ts            # ç¹é«”ä¸­æ–‡èªç³»
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ agentStore.ts       # Agent ç‹€æ…‹ç®¡ç†
â”‚   â””â”€â”€ settingsStore.ts    # è¨­å®šç‹€æ…‹ç®¡ç†
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ DashboardView.vue   # ä¸»å„€è¡¨æ¿ï¼ˆAgent ç¶²æ ¼ï¼‰
â”‚   â”œâ”€â”€ SettingsView.vue    # è¨­å®šé é¢
â”‚   â””â”€â”€ OnboardingView.vue  # é¦–æ¬¡ä½¿ç”¨å¼•å°
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ AppSidebar.vue  # å¯æŠ˜ç–Šå´é‚Šæ¬„
â”‚   â”‚   â””â”€â”€ AppTopBar.vue   # é ‚éƒ¨æ“ä½œåˆ—
â”‚   â”œâ”€â”€ AgentCard.vue       # Agent ç‹€æ…‹å¡ç‰‡
â”‚   â”œâ”€â”€ FocusMode.vue       # å…¨è¢å¹•çµ‚ç«¯æ¨¡å¼
â”‚   â”œâ”€â”€ TerminalView.vue    # xterm.js çµ‚ç«¯æ¸²æŸ“
â”‚   â”œâ”€â”€ SpawnDialog.vue     # æ–°å¢ Agent å°è©±æ¡†
â”‚   â”œâ”€â”€ LogSearch.vue       # æ—¥èªŒæœå°‹é¢æ¿
â”‚   â”œâ”€â”€ ErrorBoundary.vue   # éŒ¯èª¤é‚Šç•Œçµ„ä»¶
â”‚   â””â”€â”€ SkillsPanel.vue     # æŠ€èƒ½é¢æ¿
â”œâ”€â”€ composables/
â”‚   â”œâ”€â”€ useKeyboardShortcuts.ts  # å¿«æ·éµ
â”‚   â”œâ”€â”€ useTheme.ts              # ä¸»é¡Œåˆ‡æ›
â”‚   â””â”€â”€ useParserWorker.ts       # Web Worker è§£æ
â””â”€â”€ workers/
    â””â”€â”€ parser.worker.ts    # èƒŒæ™¯è§£æ Worker
```

---

## 3. åŠŸèƒ½éœ€æ±‚ (Functional Requirements)

### 3.1 ä»£ç†äººæœƒè©±ç®¡ç† (Agent Session Management)

| ID | åŠŸèƒ½ | èªªæ˜ |
|----|------|------|
| **FR-01-01** | æ–°å¢ä»£ç†äºº | ä½¿ç”¨è€…å¯é¸æ“‡ä»£ç†äººé¡å‹ï¼ˆ7 ç¨® CLI + Customï¼‰ã€æŒ‡å®šè‡ªè¨‚åç¨±ï¼Œä¸¦æŒ‡å®šå·¥ä½œç›®éŒ„ä¾†å•Ÿå‹•å¯¦ä¾‹ |
| **FR-01-02** | å¤šé‡å¯¦ä¾‹ | ç³»çµ±æ”¯æ´åŒæ™‚é–‹å•Ÿ **20+** ç¨ç«‹çš„ CLI ç¨‹åº |
| **FR-01-03** | ç”Ÿå‘½é€±æœŸæ§åˆ¶ | æ”¯æ´ã€Œæš«åœã€ã€ã€Œé‡å•Ÿã€èˆ‡ã€ŒéŠ·æ¯€ã€æ“ä½œ |
| **FR-01-04** | ç’°å¢ƒéš”é›¢ | æ¯å€‹ä»£ç†äººé‹è¡Œåœ¨ç¨ç«‹ Process ä¸­ |
| **FR-01-05** | CLI è‡ªå‹•åµæ¸¬ | ç³»çµ±è‡ªå‹•åµæ¸¬å·²å®‰è£çš„ CLI å·¥å…·ï¼Œé¡¯ç¤ºå®‰è£ç‹€æ…‹èˆ‡ç‰ˆæœ¬ |
| **FR-01-06** | è‡ªè¨‚è·¯å¾‘ | ä½¿ç”¨è€…å¯åœ¨è¨­å®šä¸­è¦†è“‹ CLI çš„é è¨­è·¯å¾‘ |

### 3.2 çµ‚ç«¯æ©Ÿäº’å‹•èˆ‡å½è£ (Terminal Interaction & Emulation)

| ID | åŠŸèƒ½ | èªªæ˜ |
|----|------|------|
| **FR-02-01** | TTY å½è£ | æ¬ºé¨™ CLI å·¥å…·ä½¿å…¶èªç‚ºé‹è¡Œæ–¼æ¨™æº–çµ‚ç«¯æ©Ÿä¸­ |
| **FR-02-02** | äº’å‹•æ¨¡å¼ | å°ˆæ³¨æ¨¡å¼æä¾›å®Œæ•´ xterm.js ä»‹é¢ï¼Œæ”¯æ´éµç›¤è¼¸å…¥ |
| **FR-02-03** | æ—¥èªŒæœå°‹ | åœ¨å°ˆæ³¨æ¨¡å¼ä¸­æ”¯æ´ `Ctrl+F` å…¨æ–‡æœå°‹ï¼ˆxterm-addon-searchï¼‰ |

### 3.3 ç‹€æ…‹è§£æèˆ‡è¦–è¦ºåŒ– (State Parsing & Visualization)

| ID | åŠŸèƒ½ | èªªæ˜ |
|----|------|------|
| **FR-03-01** | é—œéµå­—è§¸ç™¼ | å…§å»º 7 ç¨® CLI çš„è§£æè¦å‰‡åº«ï¼ˆRegex Rulesetï¼‰ |
| **FR-03-02** | ç‹€æ…‹æ˜ å°„ | å°‡è§£æçµæœæ˜ å°„ç‚º IDLE/THINKING/WORKING/ERROR/WAITING_USER |
| **FR-03-03** | æŠ€èƒ½å„€è¡¨æ¿ | åœ¨å¡ç‰‡èˆ‡å°ˆæ³¨æ¨¡å¼ä¸­é¡¯ç¤ºç•¶å‰åŸ·è¡Œçš„æ“ä½œ |
| **FR-03-04** | Web Worker è§£æ | æ­£å‰‡è§£æåœ¨ Web Worker ä¸­åŸ·è¡Œï¼Œä¸é˜»å¡ä¸»ç·šç¨‹ |

**ç‹€æ…‹æ˜ å°„**ï¼š

| ç‹€æ…‹ | ä»£ç¢¼ | èªªæ˜ | é¡è‰² |
|------|------|------|------|
| é–’ç½® | `IDLE` | ç­‰å¾…è¼¸å…¥ | ç¶ è‰² |
| æ¨ç†ä¸­ | `THINKING` | AI æ­£åœ¨æ€è€ƒ | é»ƒè‰² |
| å·¥ä½œä¸­ | `WORKING` | åŸ·è¡Œ Skill/Tool ä¸­ | è—è‰²ï¼ˆå‘¼å¸ç‡ˆï¼‰ |
| éŒ¯èª¤ | `ERROR` | ç™¼ç”ŸéŒ¯èª¤ | ç´…è‰² |
| ç­‰å¾…ç¢ºèª | `WAITING_USER` | ç­‰å¾…ä½¿ç”¨è€…ç¢ºèª | æ©™è‰² |

### 3.4 æŒ‡ä»¤å»£æ’­ç³»çµ± (Command Broadcasting)

| ID | åŠŸèƒ½ | èªªæ˜ |
|----|------|------|
| **FR-04-01** | æ‰¹é‡æŒ‡ä»¤ | æ”¯æ´é€éã€Œæ¨™ç±¤ï¼ˆTagsï¼‰ã€æˆ–ã€Œå…¨é¸ã€æ–¹å¼æ‰¹é‡ç™¼é€æŒ‡ä»¤ |
| **FR-04-02** | è®Šæ•¸æ³¨å…¥ | æ”¯æ´ç°¡å–®çš„è®Šæ•¸æ›¿æ›ï¼ˆå¦‚ `{filename}`ï¼‰ |

### 3.5 è¨­å®šèˆ‡æŒä¹…åŒ– (Settings & Persistence)

| ID | åŠŸèƒ½ | èªªæ˜ |
|----|------|------|
| **FR-05-01** | è¨­å®šé é¢ | æä¾›å®Œæ•´çš„è¨­å®š UIï¼ˆä¸€èˆ¬ã€CLI è·¯å¾‘ã€æ•ˆèƒ½ã€é—œæ–¼ï¼‰ |
| **FR-05-02** | æŒä¹…åŒ– | è¨­å®šè‡ªå‹•å„²å­˜è‡³ `userData/settings.json` |
| **FR-05-03** | èªè¨€åˆ‡æ› | æ”¯æ´è‹±æ–‡/ç¹é«”ä¸­æ–‡å³æ™‚åˆ‡æ› |
| **FR-05-04** | ä¸»é¡Œåˆ‡æ› | æ”¯æ´æ·±è‰²/æ·ºè‰²ä¸»é¡Œ |
| **FR-05-05** | é¦–æ¬¡å¼•å° | Onboarding ç²¾éˆï¼šæ­¡è¿ â†’ CLI åµæ¸¬ â†’ å¿«é€Ÿé–‹å§‹ â†’ å®Œæˆ |

### 3.6 éµç›¤å¿«æ·éµ (Keyboard Shortcuts)

| å¿«æ·éµ | åŠŸèƒ½ |
|--------|------|
| `Ctrl+N` | æ–°å¢ Agent |
| `Ctrl+B` | é–‹å•Ÿå»£æ’­é¢æ¿ |
| `Ctrl+,` | é–‹å•Ÿè¨­å®š |
| `Ctrl+1~9` | èšç„¦ç¬¬ N å€‹ Agent |
| `Ctrl+F` | æ—¥èªŒæœå°‹ï¼ˆå°ˆæ³¨æ¨¡å¼ï¼‰ |
| `Escape` | è¿”å›å„€è¡¨æ¿ |

---

## 4. UI/UX è¨­è¨ˆè¦ç¯„ (UI/UX Requirements)

### 4.1 ä»‹é¢æ¶æ§‹ (Layout Architecture)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Neural Hive v2.0                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  S   â”‚  â”‚  AppTopBar: Search | +Spawn | Broadcast      â”‚    â”‚
â”‚  I   â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  D   â”‚  â”‚                                              â”‚    â”‚
â”‚  E   â”‚  â”‚  <router-view />                             â”‚    â”‚
â”‚  B   â”‚  â”‚                                              â”‚    â”‚
â”‚  A   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  R   â”‚  â”‚  â”‚Agent1â”‚  â”‚Agent2â”‚  â”‚Agent3â”‚  â”‚Agent4â”‚    â”‚    â”‚
â”‚      â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  ğŸŒ  â”‚  â”‚                                              â”‚    â”‚
â”‚  ğŸŒ™  â”‚  â”‚  Dashboard / Settings / Onboarding           â”‚    â”‚
â”‚      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **AppSidebar**ï¼šå¯æŠ˜ç–Šå´é‚Šæ¬„ï¼ŒåŒ…å«å°è¦½ã€Agent çµ±è¨ˆã€èªè¨€/ä¸»é¡Œåˆ‡æ›
- **AppTopBar**ï¼šæœå°‹åˆ—ã€æ–°å¢ Agentã€å»£æ’­ã€æ´»èº Agent è¨ˆæ•¸
- **Router View**ï¼šDashboardï¼ˆç¶²æ ¼ï¼‰/ Settings / Onboarding

### 4.2 ä½¿ç”¨è€…é«”é©— (UX)

| é …ç›® | è¦ç¯„ | ç‹€æ…‹ |
|------|------|------|
| **å‘¼å¸ç‡ˆæ•ˆæœ** | WORKING ç‹€æ…‹å¡ç‰‡é‚Šæ¡†å‘¼å¸ç‡ˆå‹•ç•« | âœ… å®Œæˆ |
| **éŒ¯èª¤è­¦ç¤º** | ERROR å¡ç‰‡ç«‹å³è®Šç´… + Taskbar æ¨™è¨˜ | âœ… å®Œæˆ |
| **ç‹€æ…‹è½‰æ›** | 300ms éæ¸¡å‹•ç•« | âœ… å®Œæˆ |
| **éŸ¿æ‡‰å¼ä½ˆå±€** | Grid è‡ªå‹•èª¿æ•´ 1-4 æ¬„ | âœ… å®Œæˆ |
| **æ¯›ç»ç’ƒæ•ˆæœ** | Glassmorphism è¨­è¨ˆèªè¨€ | âœ… å®Œæˆ |
| **ç©ºç‹€æ…‹** | ç„¡ Agent æ™‚é¡¯ç¤ºå¼•å°å¼ç©ºç‹€æ…‹é é¢ | âœ… å®Œæˆ |
| **éµç›¤å°è¦½** | å®Œæ•´çš„å¿«æ·éµæ”¯æ´ | âœ… å®Œæˆ |
| **é›™èªä»‹é¢** | è‹±æ–‡/ç¹é«”ä¸­æ–‡å³æ™‚åˆ‡æ› | âœ… å®Œæˆ |

---

## 5. éåŠŸèƒ½éœ€æ±‚ (Non-Functional Requirements)

### 5.1 æ•ˆèƒ½è¦æ±‚ (Performance)

| ID | éœ€æ±‚ | è¦æ ¼ | ç‹€æ…‹ |
|----|------|------|------|
| **NFR-01** | æ¸²æŸ“ç¯€æµ | â‰¤30 FPSï¼Œ100ms æ‰¹æ¬¡è™•ç† | âœ… OutputThrottler |
| **NFR-02** | è¨˜æ†¶é«”ç®¡ç† | 10,000 è¡Œè‡ªå‹•ä¿®å‰ª | âœ… xterm scrollback |
| **NFR-03** | å•Ÿå‹•æ™‚é–“ | <3 ç§’ | âœ… |
| **NFR-04** | ä½µç™¼æ”¯æ´ | ç©©å®šé‹è¡Œ 20+ Agent | âœ… |
| **NFR-05** | ä¸»ç·šç¨‹ä¿è­· | æ­£å‰‡è§£æä¸é˜»å¡ UI | âœ… Web Worker |
| **NFR-06** | Log ç›£è½æ•ˆèƒ½ | åŸºæ–¼è¨ˆæ•¸å™¨è€Œéæ·±åº¦ç›£è½ | âœ… logUpdateCounter |

### 5.2 æ“´å……æ€§ (Extensibility)

| ID | éœ€æ±‚ | è¦æ ¼ |
|----|------|------|
| **NFR-07** | è¨­å®šæª”é©…å‹• | è§£æè¦å‰‡å­˜æ–¼ `config/parsers.json`ï¼Œå¯è‡ªè¨‚æ“´å±• |
| **NFR-08** | æ’ä»¶æ¶æ§‹ | é ç•™æ’ä»¶ä»‹é¢ï¼Œæ”¯æ´æ–°å¢ CLI å·¥å…· |

### 5.3 æ¸¬è©¦è¦†è“‹ç‡ (Test Coverage)

| æŒ‡æ¨™ | ç›®æ¨™ | å¯¦éš› |
|------|------|------|
| æ¸¬è©¦æª”æ¡ˆæ•¸ | - | 9 |
| æ¸¬è©¦æ¡ˆä¾‹æ•¸ | - | 196 |
| åˆ†æ”¯è¦†è“‹ç‡ | â‰¥75% | âœ… |
| å‡½å¼è¦†è“‹ç‡ | â‰¥75% | âœ… |
| è¡Œè¦†è“‹ç‡ | â‰¥75% | âœ… |

---

## 6. å¯¦ä½œéšæ®µè¦åŠƒ (Implementation Roadmap)

### Phase 1: æ ¸å¿ƒåŸå‹ âœ…

| é‡Œç¨‹ç¢‘ | ç‹€æ…‹ |
|--------|------|
| Electron ç’°å¢ƒæ­å»º | âœ… å®Œæˆ |
| node-pty æ•´åˆ | âœ… å®Œæˆ |
| xterm.js æ¸²æŸ“ | âœ… å®Œæˆ |
| åŸºç¤ IPC | âœ… å®Œæˆ |

### Phase 2: å¤šå·¥èˆ‡è§£æ âœ…

| é‡Œç¨‹ç¢‘ | ç‹€æ…‹ |
|--------|------|
| AgentManager é¡åˆ¥ | âœ… å®Œæˆ |
| ç‹€æ…‹è§£æå¼•æ“ | âœ… å®Œæˆ |
| Grid View UI | âœ… å®Œæˆ |
| å°ˆæ³¨æ¨¡å¼ | âœ… å®Œæˆ |

### Phase 3: å•†æ¥­åŒ–å‡ç´š (v2.0 Renovation) âœ…

| é‡Œç¨‹ç¢‘ | ç‹€æ…‹ |
|--------|------|
| æ“´å±•é¡å‹ç³»çµ±ï¼ˆ7 ç¨® CLIï¼‰ | âœ… å®Œæˆ |
| CLI è‡ªå‹•åµæ¸¬å¼•æ“ | âœ… å®Œæˆ |
| æ›¿æ› Mock Agent ç‚ºçœŸå¯¦ CLI | âœ… å®Œæˆ |
| è¨­å®šç®¡ç†å™¨ + æŒä¹…åŒ– | âœ… å®Œæˆ |
| Vue Router + å¤šé é¢ | âœ… å®Œæˆ |
| Vue I18n é›™èªç³»çµ± | âœ… å®Œæˆ |
| App.vue Shell é‡æ§‹ | âœ… å®Œæˆ |
| Sidebar + TopBar ä½ˆå±€ | âœ… å®Œæˆ |
| SpawnDialogï¼ˆCLI åµæ¸¬æ•´åˆï¼‰ | âœ… å®Œæˆ |
| SettingsViewï¼ˆå®Œæ•´è¨­å®šé é¢ï¼‰ | âœ… å®Œæˆ |
| OnboardingViewï¼ˆé¦–æ¬¡å¼•å°ç²¾éˆï¼‰ | âœ… å®Œæˆ |
| éµç›¤å¿«æ·éµ | âœ… å®Œæˆ |
| æ—¥èªŒæœå°‹ (xterm-addon-search) | âœ… å®Œæˆ |
| æ·±è‰²/æ·ºè‰²ä¸»é¡Œåˆ‡æ› | âœ… å®Œæˆ |
| å‘¼å¸ç‡ˆå‹•ç•« | âœ… å®Œæˆ |
| ErrorBoundary çµ„ä»¶ | âœ… å®Œæˆ |
| Web Worker è§£æå™¨ | âœ… å®Œæˆ |
| logUpdateCounter æ•ˆèƒ½å„ªåŒ– | âœ… å®Œæˆ |
| å–®å…ƒæ¸¬è©¦ï¼ˆ196 å€‹ï¼‰ | âœ… å®Œæˆ |

---

## é™„éŒ„

### A. è¡“èªè¡¨ (Glossary)

| è¡“èª | å®šç¾© |
|------|------|
| **Agent** | ä¸€å€‹ç¨ç«‹é‹è¡Œçš„ AI CLI å¯¦ä¾‹ |
| **TTY** | Teletypewriterï¼Œçµ‚ç«¯æ©Ÿä»‹é¢ |
| **IPC** | Inter-Process Communicationï¼Œé€²ç¨‹é–“é€šè¨Š |
| **ANSI** | ç¾åœ‹åœ‹å®¶æ¨™æº–å”æœƒï¼Œæ­¤è™•æŒ‡çµ‚ç«¯é¡è‰²ç·¨ç¢¼æ¨™æº– |
| **node-pty** | Node.js çš„å½çµ‚ç«¯æ©Ÿ (pseudo-terminal) å¯¦ä½œ |
| **CLI Detector** | è‡ªå‹•åµæ¸¬ç³»çµ± PATH ä¸­å·²å®‰è£çš„ AI CLI å·¥å…· |
| **Onboarding** | é¦–æ¬¡ä½¿ç”¨å¼•å°æµç¨‹ |
| **Web Worker** | ç€è¦½å™¨èƒŒæ™¯ç·šç¨‹ï¼Œç”¨æ–¼é›¢ç·šè¨ˆç®— |

### B. ç›¸é—œæ–‡ä»¶

- [x] è»Ÿé«”è¦æ ¼èªªæ˜æ›¸ï¼ˆæœ¬æ–‡ä»¶ï¼‰
- [x] ä½¿ç”¨è€…æ‰‹å†Šï¼ˆ`docs/ä½¿ç”¨èªªæ˜æ›¸.md`ï¼‰
- [x] é–‹ç™¼è—åœ–ï¼ˆ`docs/ROADMAP.zh-TW.md`ï¼‰
- [ ] E2E æ¸¬è©¦è¨ˆç•«æ›¸

---

*Document Version: 2.0.0*
*Last Updated: 2026-02-09*
*Author: System Orchestrator*
